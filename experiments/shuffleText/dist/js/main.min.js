function WordShuffler(t,e){function r(t){t++,i.needUpdate&&i.updateCharacter(t),requestAnimationFrame(r)}var i=this,a=0;this.now,this.then=Date.now(),this.delta,this.currentTimeOffset=0,this.word=null,this.currentWord=null,this.currentCharacter=0,this.currentWordLength=0;var s={fps:20,timeOffset:5,textColor:"#000",fontSize:"50px",useCanvas:!1,mixCapital:!1,mixSpecialCharacters:!1,needUpdate:!0,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#9e9e9e","#607d8b"]};if("undefined"!=typeof e)for(key in e)s[key]=e[key];this.needUpdate=!0,this.fps=s.fps,this.interval=1e3/this.fps,this.timeOffset=s.timeOffset,this.textColor=s.textColor,this.fontSize=s.fontSize,this.mixCapital=s.mixCapital,this.mixSpecialCharacters=s.mixSpecialCharacters,this.colors=s.colors,this.useCanvas=s.useCanvas,this.chars=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this.specialCharacters=["!","§","$","%","&","/","(",")","=","?","_","<",">","^","°","*","#","-",":",";","~",".",","],this.mixSpecialCharacters&&(this.chars=this.chars.concat(this.specialCharacters)),this.getRandomColor=function(){var t=Math.floor(Math.random()*this.colors.length);return this.colors[t]},this.position={x:0,y:50},"undefined"!=typeof t&&(this.holder=t),this.useCanvas||"undefined"!=typeof this.holder||console.warn("Holder must be defined in DOM Mode. Use Canvas or define Holder"),this.getRandCharacter=function(t){if(" "==t)return" ";var e=Math.floor(Math.random()*this.chars.length),r=-.5+Math.random(),i=this.chars[e],a=i.toLowerCase();return this.mixCapital&&(a=0>r?i.toLowerCase():i),a},this.writeWord=function(t){this.word=t,this.currentWord=t.split(""),this.currentWordLength=this.currentWord.length},this.generateSingleCharacter=function(t,e){var r=document.createElement("span");return r.style.color=t,r.innerHTML=e,r},this.updateCharacter=function(t){if(this.now=Date.now(),this.delta=this.now-this.then,this.delta>this.interval){this.currentTimeOffset++;var e=[];this.currentTimeOffset===this.timeOffset&&this.currentCharacter!==this.currentWordLength&&(this.currentCharacter++,this.currentTimeOffset=0);for(var r=0;r<this.currentCharacter;r++)e.push(this.currentWord[r]);for(var a=0;a<this.currentWordLength-this.currentCharacter;a++)e.push(this.getRandCharacter(this.currentWord[this.currentCharacter+a]));if(i.useCanvas){c.clearRect(0,0,stage.x*stage.dpr,stage.y*stage.dpr),c.font=i.fontSize+" sans-serif";var s=0;e.forEach(function(t,e){e>i.currentCharacter?c.fillStyle=i.getRandomColor():c.fillStyle=i.textColor,c.fillText(t,i.position.x+s,i.position.y),s+=c.measureText(t).width})}else i.currentCharacter===i.currentWordLength&&(i.needUpdate=!1),this.holder.innerHTML="",e.forEach(function(t,e){var r=null;r=e>i.currentCharacter?i.getRandomColor():i.textColor,i.holder.appendChild(i.generateSingleCharacter(r,t))});this.then=this.now-this.delta%this.interval}},this.restart=function(){this.currentCharacter=0,this.needUpdate=!0},this.writeWord(this.holder.innerHTML),r(a)}var headline=document.getElementById("headline"),text=document.getElementById("text"),shuffler=document.getElementById("shuffler"),headText=new WordShuffler(headline,{textColor:"#fff",timeOffset:18,mixCapital:!0,mixSpecialCharacters:!0}),pText=new WordShuffler(text,{textColor:"#fff",timeOffset:2}),buttonText=new WordShuffler(shuffler,{textColor:"tomato",timeOffset:10});shuffler.addEventListener("click",function(){headText.restart(),pText.restart(),buttonText.restart()});