function PointCloud(t,e){var o=this;this.points=[],this.context=t.getContext("2d"),this.element=t,this.stage={x:t.offsetWidth,y:t.offsetHeight};var i={count:50,radius:150,mouseAdd:!0,mouseAddPointCount:5,circleRadius:2,autoClear:!0,drawCircle:!0,circleColor:"#666",drawLines:!0,drawBackground:!0,background:"#222",speed:1,setLineColor:function(t){return"hsl("+(255-255*t)+", 100%,50%)"}};if("undefined"!=typeof e)for(key in e)key in i?i[key]=e[key]:console.warn("Option with value:"+key+" does not exist!");this.count=i.count,this.radius=i.radius,this.mouseAdd=i.mouseAdd,this.mouseAddPointCount=i.mouseAddPointCount,this.circleRadius=i.circleRadius,this.autoClear=i.autoClear,this.drawCircle=i.drawCircle,this.circleColor=i.circleColor,this.drawLines=i.drawLines,this.drawBackground=i.drawBackground,this.background=i.background,this.speed=i.speed,this.getDir=function(){var t=-.5+Math.random();return t=0>=t?-1:1},this.getColor=i.setLineColor,this.checkRadius=function(t,e,o){var i=(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y);return[o*o>=i,i]},this.generateSinglePoint=function(t){var e={pos:{x:Math.random()*this.stage.x,y:Math.random()*this.stage.y},vel:{x:2*Math.random(),y:2*Math.random()},dir:{x:this.getDir(),y:this.getDir()}};return"undefined"!=typeof t&&(e.pos.x=t.x,e.pos.y=t.y),e},this.generateCloud=function(){this.points=[];for(var t=0;t<this.count;t++)this.points.push(this.generateSinglePoint())},this.generateCloud(),this.update=function(){this.autoClear&&this.context.clearRect(0,0,this.stage.x,this.stage.y),this.drawBackground&&(this.context.fillStyle=this.background,this.context.fillRect(0,0,this.stage.x,this.stage.y)),this.points.forEach(function(t,e){(t.pos.x<=0||t.pos.x>=o.stage.x)&&(t.dir.x*=-1),(t.pos.y<=0||t.pos.y>=o.stage.y)&&(t.dir.y*=-1),t.pos.x+=t.vel.x*o.speed*t.dir.x,t.pos.y+=t.vel.y*o.speed*t.dir.y,o.context.fillRect(t.pos.x,t.pos.y,1,1),o.points.forEach(function(i,s){var n=o.checkRadius(t.pos,i.pos,o.radius);if(s!=e&&n[0]){var r=1-.01*n[1]/(o.radius-20);r=r>0?r:0,r=1>r?r:1,o.context.strokeStyle=o.getColor(r),o.context.fillStyle=o.getColor(r),o.context.globalAlpha=r,o.drawLines&&(o.context.beginPath(),o.context.moveTo(t.pos.x,t.pos.y),o.context.lineTo(i.pos.x,i.pos.y),o.context.stroke()),o.drawCircle&&(o.context.beginPath(),null!=o.circleColor&&(o.context.fillStyle=o.circleColor),o.context.arc(t.pos.x,t.pos.y,o.circleRadius,0,2*Math.PI,!1),o.context.fill()),o.context.closePath(),o.context.globalAlpha=1}})})},window.addEventListener("mousedown",function(t){if(o.mouseAdd)for(var e={x:t.clientX,y:t.clientY},i=0;i<o.mouseAddPointCount;i++)o.points.push(o.generateSinglePoint(e))}),this.resize=function(){o.stage.x=o.element.offsetWidth,o.stage.y=o.element.offsetHeight}}